# 🍽️ Restaurant Bot

Telegram бот для выбора ресторанов с системой статистики и отзывов. Предназначен для группы из 3 человек + бот.

## 📁 Структура проекта

```
📦 Restaurant Bot
├── 🐍 perfect_bot.py          # Основной файл бота
├── 🔔 notifications.py        # Система уведомлений
├── 📊 restaurants.json        # Данные ресторанов
├── 📋 requirements.txt        # Зависимости Python
├── ⚙️ set_commands.py         # Регистрация команд в Telegram
├── 🗄️ restaurant_bot.db      # База данных SQLite (создается автоматически)
├── 🐳 Dockerfile             # Docker контейнер
├── 🐳 docker-compose.yml     # Docker оркестрация
├── ⚙️ systemd/               # Systemd сервис
├── 🚀 deploy.sh              # Скрипт развертывания
├── 📖 README.md              # Документация
├── 🚀 HOSTING.md             # Инструкции по хостингу
├── 📋 SETUP_INSTRUCTIONS.md  # Инструкции по настройке
├── 🔐 env.example            # Пример переменных окружения
└── 🔐 .env                   # Переменные окружения (создать самостоятельно)
```

## 🚀 Быстрый старт

### Локальная разработка

#### 1. Установка зависимостей
```bash
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

#### 2. Настройка переменных окружения
```bash
cp env.example .env
# Отредактируйте .env с вашими данными
```

#### 3. Регистрация команд
```bash
python set_commands.py
```

#### 4. Запуск бота
```bash
python perfect_bot.py
```

### 🚀 Развертывание на сервере

#### Docker (Рекомендуется)
```bash
# Быстрый запуск
docker-compose up -d

# Просмотр логов
docker-compose logs -f
```

#### Systemd (Linux)
```bash
# Автоматическое развертывание
sudo ./deploy.sh systemd
```

📖 **Подробные инструкции по хостингу**: [HOSTING.md](HOSTING.md)

## 🎯 Команды бота

- `/start` - 🚀 Запустить бота и получить помощь
- `/random` - 🎲 Выбрать случайный ресторан
- `/next_event` - 📅 Проверить ближайшее событие
- `/stats` - 📊 Статистика посещений и отзывы
- `/cancel_event` - ❌ Отменить активное событие (только админ)
- `/clear_reviews` - 🗑️ Удалить все отзывы (только админ)

## 📱 Как использовать

1. **Создайте событие**: `/random` → все 3 участника нажимают "Я иду!" → выберите время
2. **После посещения**: нажмите "✅ Завершить событие"
3. **Оставьте отзывы**: каждый из 3 участников оставляет отзыв (оценка ⭐⭐⭐⭐⭐ + комментарий)
4. **Посмотрите статистику**: `/stats` - увидите все посещения и отзывы

## 📊 Функции

- ✅ Выбор случайного ресторана
- ✅ Подтверждение участия (3/3 участника)
- ✅ Выбор даты и времени
- ✅ Система отзывов (3 отзыва от 3 участников)
- ✅ Статистика посещений с процентами
- ✅ История отзывов
- ✅ Отмена активных событий
- ✅ Автоматические уведомления (за 5 дней, в день события)
- ✅ Запрос отзывов через 3 часа после события
- ✅ Ежедневные напоминания об отзывах
- ✅ Админские команды (отмена события, очистка отзывов)

## 🔧 Технические детали

- **Python 3.13+**
- **python-telegram-bot 22.5**
- **SQLite** для хранения данных
- **Асинхронная архитектура**

## 📝 Лицензия

MIT License